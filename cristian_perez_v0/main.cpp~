#include <iostream>
#include <vector>
#include "percolation.h"
#include <random>

int main(int agrc,char *argv[]){

  //std::vector<int> grid(N*N);
  int seed = std::atoi(argv[1]);
  float p = std::atof(argv[2]);
  int N = std::atoi(argv[3]);
  
  Percolation percolation = Percolation(N);
  std::mt19937 gen(seed);
  std::uniform_real_distribution<double> dis(0, 1);
  for(int i = 0; i < N; ++i) {
    for(int j = 0; j < N; ++j) {
      float gen2 = dis(gen);
      if(gen2<=p){
	percolation.open(i,j);
	//grid[n] = 1;
      }
    }
  }

  
  
  //int n = 4;
  //Percolation p = Percolation(n);
  // p.open(0, 1);
  //p.open(1, 1);
  //p.open(2, 1);
  
  for (int i = 0; i < n * n + 2; i++){
    std::cout<<percolation.getQu().find(i)<<" ";;
  }
  std::cout<<"Sitios libres: "<<percolation.numberOfOpenSites()<<std::endl;
  std::cout<<"Percola: "<<percolation.percolates()<<std::endl;

  
  return 0;
}
